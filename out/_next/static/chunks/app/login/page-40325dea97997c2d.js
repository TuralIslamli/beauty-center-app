(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2635:function(e,l,r){Promise.resolve().then(r.bind(r,5207))},5207:function(e,l,r){"use strict";r.r(l);var s=r(7437),a=r(2265),i=r(8861),t=r(6498),o=r(8708),n=r(5313),u=r(9343),d=r(6463),c=r(2959),m=r(323);let f={TOKEN:"token"};l.default=()=>{let[e,l]=(0,a.useState)(""),[r,v]=(0,a.useState)(!1),{control:b,handleSubmit:h,formState:{errors:p}}=(0,u.cI)(),x=(0,d.useRouter)(),g=(0,a.useCallback)(async e=>{l(""),v(!0);try{let{data:l}=await c.Z.postLogin(e);localStorage.setItem(f.TOKEN,l.token.access_token),x.push("/")}catch(e){var r,s;console.error("Login failed:",e),l((null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Giriş uğursuz oldu")}finally{v(!1)}},[x]);(0,a.useEffect)(()=>{localStorage.getItem(f.TOKEN)&&x.push("/")},[x]);let j=p.password&&p.email;return(0,s.jsxs)("main",{className:"login-main",children:[(0,s.jsxs)("form",{className:"login-form",onSubmit:h(g),children:[(0,s.jsx)(m.Wi,{label:"Email",htmlFor:"email",children:(0,s.jsx)(u.Qr,{name:"email",control:b,rules:{required:!0},render:e=>{let{field:l}=e;return(0,s.jsx)(i.o,{id:"email",invalid:!!p.email,"aria-describedby":"email-help",...l})}})}),(0,s.jsx)(m.Wi,{label:"Şifrə",htmlFor:"password",children:(0,s.jsx)(u.Qr,{name:"password",control:b,rules:{required:!0},render:e=>{let{field:l}=e;return(0,s.jsx)(t.r,{id:"password",toggleMask:!0,feedback:!1,invalid:!!p.password,...l})}})}),(0,s.jsx)(o.z,{label:"Giriş",type:"submit",disabled:r,loading:r,className:"w-full"})]}),j&&(0,s.jsx)(n.v,{severity:"error",text:"Email və şifrə tələb olunur",className:"mt-4"}),e&&(0,s.jsx)(n.v,{severity:"error",text:e,className:"mt-4"})]})}}},function(e){e.O(0,[72,973,39,971,23,744],function(){return e(e.s=2635)}),_N_E=e.O()}]);