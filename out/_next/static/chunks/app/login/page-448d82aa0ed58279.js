(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2635:function(e,t,r){Promise.resolve().then(r.bind(r,5207))},2959:function(e,t,r){"use strict";var s=r(1398);t.Z={postLogin:e=>s.W.post("login",e),getSelfInfo:()=>s.W.get("users/self-info"),getServiceTypes:e=>{let{page:t,size:r}=e;return s.W.get("service-types?page=".concat(t,"&size=").concat(r))},deleteUser:e=>s.W.delete("users/".concat(e)),createUser:e=>s.W.post("users",e),updateUser:e=>{let{name:t,surname:r,email:a,roleId:o,password:n,password_repeat:c,id:i}=e;return s.W.put("users/".concat(i),{name:t,surname:r,email:a,roleId:o,password:n,password_repeat:c})},updateServiceType:e=>{let{id:t,name:r,price:a}=e;return s.W.put("service-types/".concat(t),{name:r,price:a})},createServiceType:e=>{let{name:t,price:r}=e;return s.W.post("service-types",{name:t,price:r})},deleteServiceType:e=>s.W.delete("service-types/".concat(e)),getUsers:e=>{let{page:t,size:r}=e;return s.W.get("users?page=".concat(t,"&size=").concat(r))},getServices:e=>{let{page:t,size:r}=e;return s.W.get("services?page=".concat(t,"&size=").concat(r))},getDoctors:()=>s.W.get("users/input-search"),getInputServices:()=>s.W.get("service-types/input-search"),createService:e=>s.W.post("services",e),updateService:e=>s.W.put("services/".concat(e.id),e),getDailyReportExcel:async e=>{try{let t=await s.W.get("services/daily-report?excel_export=true&sorted_day=".concat(e),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=r,a.setAttribute("download","daily_report_".concat(e,".xlsx")),a.click(),document.body.removeChild(a)}catch(e){console.error("Error downloading the file",e)}},getGeneralReportExcel:async e=>{try{let t=await s.W.get("services/daily-report?excel_export=true&from_date=".concat(e[0],"&to_date=").concat(e[1]),{responseType:"blob"}),r=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=window.URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.setAttribute("download","general_report_".concat(e[0],"/").concat(e[1],".xlsx")),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(e){console.error("Error downloading the file",e)}}}},5207:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(8861),o=r(6498),n=r(8708),c=r(5313),i=r(2265),l=r(9343),d=r(6463),u=r(6754),p=r.n(u),m=r(2959);t.default=function(){let[e,t]=(0,i.useState)(""),{control:r,handleSubmit:u,formState:{errors:g}}=(0,l.cI)(),v=(0,d.useRouter)(),h=async e=>{t("");try{let{data:t}=await m.Z.postLogin(e);localStorage.setItem("token",t.token.access_token),v.push("/")}catch(e){var r,s;console.error(e),t(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)}};return(0,i.useEffect)(()=>{localStorage.getItem("token")&&v.push("/")},[]),(0,s.jsxs)("main",{className:p().main,children:[(0,s.jsxs)("form",{className:p().inputs,onSubmit:u(h),children:[(0,s.jsxs)("div",{className:p().input,children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email"}),(0,s.jsx)(l.Qr,{name:"email",control:r,rules:{required:!0},render:e=>{let{field:t}=e;return(0,s.jsx)(a.o,{invalid:!!g.email,"aria-describedby":"email-help",...t})}})]}),(0,s.jsxs)("div",{className:p().input,children:[(0,s.jsx)("label",{htmlFor:"password",children:"Password"}),(0,s.jsx)(l.Qr,{name:"password",control:r,rules:{required:!0},render:e=>{let{field:t}=e;return(0,s.jsx)(o.r,{toggleMask:!0,feedback:!1,invalid:!!g.password,...t})}})]}),(0,s.jsx)(n.z,{label:"Login",type:"submit"})]}),g.password&&g.email&&(0,s.jsx)(c.v,{severity:"error",text:"Username and password is required"}),e&&(0,s.jsx)(c.v,{severity:"error",text:e})]})}},1398:function(e,t,r){"use strict";r.d(t,{W:function(){return i},x:function(){return n}});var s=r(2126),a=r(6463);let o=null,n=e=>{o=e},c=s.Z.create({baseURL:"https://api.nargizestetik.az/api"});c.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),c.interceptors.response.use(e=>e.data,async e=>(e.response&&"USER_NOT_AUTHORIZED"===e.response.data.message?(localStorage.clear(),(0,a.redirect)("/login")):e.response&&e.response.data.message&&o&&o.show({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3}),e&&e.response)?Promise.reject(e):Promise.reject());let i=c},6754:function(e){e.exports={main:"page_main__qq1vh",inputs:"page_inputs__Ez60K",input:"page_input__pky70"}}},function(e){e.O(0,[161,567,971,23,744],function(){return e(e.s=2635)}),_N_E=e.O()}]);