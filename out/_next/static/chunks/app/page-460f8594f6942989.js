(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1542:function(e,t,i){Promise.resolve().then(i.bind(i,4323))},2959:function(e,t,i){"use strict";var l=i(1398);t.Z={postLogin:e=>l.W.post("login",e),getSelfInfo:()=>l.W.get("users/self-info"),getServiceTypes:e=>{let{page:t,size:i}=e;return l.W.get("service-types?page=".concat(t,"&size=").concat(i))},deleteUser:e=>l.W.delete("users/".concat(e)),createUser:e=>l.W.post("users",e),updateUser:e=>{let{name:t,surname:i,email:r,roleId:s,password:n,password_repeat:a,id:o}=e;return l.W.put("users/".concat(o),{name:t,surname:i,email:r,roleId:s,password:n,password_repeat:a})},updateServiceType:e=>{let{id:t,name:i,price:r}=e;return l.W.put("service-types/".concat(t),{name:i,price:r})},createServiceType:e=>{let{name:t,price:i}=e;return l.W.post("service-types",{name:t,price:i})},deleteServiceType:e=>l.W.delete("service-types/".concat(e)),getUsers:e=>{let{page:t,size:i}=e;return l.W.get("users?page=".concat(t,"&size=").concat(i))},getServices:e=>{let{page:t,size:i}=e;return l.W.get("services?page=".concat(t,"&size=").concat(i))},getDoctors:()=>l.W.get("users/input-search"),getInputServices:()=>l.W.get("service-types/input-search"),createService:e=>l.W.post("services",e),updateService:e=>l.W.put("services/".concat(e.id),e),getDailyReportExcel:async e=>{try{let t=await l.W.get("services/daily-report?excel_export=true&sorted_day=".concat(e),{responseType:"blob"}),i=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=i,r.setAttribute("download","daily_report_".concat(e,".xlsx")),r.click(),document.body.removeChild(r)}catch(e){console.error("Error downloading the file",e)}},getGeneralReportExcel:async e=>{try{let t=await l.W.get("services/daily-report?excel_export=true&from_date=".concat(e[0],"&to_date=").concat(e[1]),{responseType:"blob"}),i=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.setAttribute("download","general_report_".concat(e[0],"/").concat(e[1],".xlsx")),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(e){console.error("Error downloading the file",e)}}}},4323:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return V}});var l=i(7437),r=i(2265),s=i(2102),n=i(2160),a=i(8708),o=i(5012),d=i(6463),c=i(2502),u=i(2959),m=i(8787),p=i(2193),v=i(5472),x=function(e){let{userDeleteDialog:t,setUserDeleteDialog:i,user:s,showSuccess:n,setUsers:o}=e,d=(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(a.z,{label:"No",icon:"pi pi-times",outlined:!0,onClick:()=>i(!1)}),(0,l.jsx)(a.z,{label:"Yes",icon:"pi pi-check",severity:"danger",onClick:()=>{o(e=>e.filter(e=>e.id!==(null==s?void 0:s.id)));try{u.Z.deleteUser(null==s?void 0:s.id),i(!1),n("Service type has been successfully deleted")}catch(e){console.error(e)}}})]});return(0,l.jsx)(v.V,{visible:t,style:{width:"32rem"},breakpoints:{"960px":"75vw","641px":"90vw"},header:"Confirm",modal:!0,footer:d,onHide:()=>i(!1),children:(0,l.jsxs)("div",{className:"confirmation-content",children:[(0,l.jsx)("i",{className:"pi pi-exclamation-triangle",style:{fontSize:"2rem",marginRight:"10px"}}),s&&(0,l.jsxs)("span",{children:["Are you sure you want to delete"," ",(0,l.jsxs)("b",{children:[null==s?void 0:s.name," ",null==s?void 0:s.surname]}),"?"]})]})})},h=i(8861),y=i(9343),j=i(4245),f=i(7753),g=i(5313),w=i(6498),b=i(3317);let _=[{id:1,name:"Super Admin"},{id:2,name:"Admin"},{id:3,name:"Cashier"},{id:4,name:"Doctor"}],S=[{id:0,name:"Cash"},{id:1,name:"Cash"}],C=[{id:0,name:"New"},{id:1,name:"Accepted"},,{id:2,name:"Rejected"}];var R=function(e){let{user:t,userEditDialog:i,setUserEditDialog:s,setUsers:n,showSuccess:o}=e,d=j.Ry().shape({name:j.Z_().required(),surname:j.Z_().required(),email:j.Z_().email("Invalid email").required(),roleId:j.Rx().required(),password:(null==t?void 0:t.id)?j.Z_():j.Z_().required(),password_repeat:j.Z_().oneOf([j.iH("password")],"Passwords must match")}),{control:c,handleSubmit:m,formState:{errors:p},setValue:x,reset:S}=(0,y.cI)({resolver:(0,f.X)(d),defaultValues:{name:void 0,surname:void 0,email:void 0,roleId:void 0,password:(null==t?void 0:t.id)?void 0:"",password_repeat:(null==t?void 0:t.id)?void 0:""}}),[C,R]=(0,r.useState)(void 0),B=async e=>{try{let{data:i}=(null==t?void 0:t.id)?await u.Z.updateUser({...e,id:t.id}):await u.Z.createUser(e);n(e=>[i,...e]),o("User has been successfully ".concat((null==t?void 0:t.id)?"created":"updated")),s(!1)}catch(e){console.error(e)}};return(0,r.useEffect)(()=>{if(null==t?void 0:t.id){var e;x("name",t.name),x("surname",t.surname),x("email",t.email),x("roleId",null===(e=t.role)||void 0===e?void 0:e.id),R(_.find(e=>{var i;return e.id===(null===(i=t.role)||void 0===i?void 0:i.id)}))}},[t,x]),(0,l.jsx)(v.V,{visible:i,style:{width:"328px"},header:"User details",modal:!0,onHide:()=>{s(!1),S(),R(void 0)},children:t&&(0,l.jsxs)("form",{onSubmit:m(B),style:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"name",children:"Name:"}),(0,l.jsx)(y.Qr,{name:"name",control:c,render:e=>{let{field:t}=e;return(0,l.jsx)(h.o,{style:{marginBottom:"10px"},id:"name",invalid:!!p.name,...t})}}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"surname",children:"Surname:"}),(0,l.jsx)(y.Qr,{name:"surname",control:c,render:e=>{let{field:t}=e;return(0,l.jsx)(h.o,{style:{marginBottom:"10px"},id:"surname",invalid:!!p.surname,...t})}}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"email",children:"Email:"}),(0,l.jsx)(y.Qr,{name:"email",control:c,render:e=>{let{field:t}=e;return(0,l.jsx)(h.o,{style:{marginBottom:"10px"},id:"email",invalid:!!p.email,...t})}}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"email",children:"Role:"}),(0,l.jsx)(y.Qr,{name:"roleId",control:c,render:e=>{let{field:t}=e;return(0,l.jsx)(b.L,{style:{marginBottom:"10px"},value:C,onChange:e=>{R(e.value),x("roleId",e.value.id)},options:_,optionLabel:"name",placeholder:"Select a role",className:"w-full md:w-14rem",invalid:!!p.roleId})}}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"password",children:"Password:"}),(0,l.jsx)(y.Qr,{name:"password",control:c,render:e=>{let{field:t}=e;return(0,l.jsx)(w.r,{style:{marginBottom:"10px",width:"200px"},id:"password",toggleMask:!0,feedback:!1,invalid:!!p.password,...t})}}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"password_repeat",children:"Confirm password:"}),(0,l.jsx)(y.Qr,{name:"password_repeat",control:c,render:e=>{let{field:t}=e;return(0,l.jsx)(w.r,{style:{marginBottom:"10px",width:"200px"},toggleMask:!0,feedback:!1,id:"password_repeat",invalid:!!p.password_repeat,...t})}}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("div",{children:p.password_repeat&&(0,l.jsx)(g.v,{style:{maxWidth:"180px",height:"45px"},severity:"error",text:"Passwords must match"})}),(0,l.jsx)(a.z,{label:"Save",type:"submit",style:{display:"flex"}})]})]})})},B=i(5565);let k=e=>{var t;return null===(t=_.find(t=>t.id===e))||void 0===t?void 0:t.name};var Z=function(e){let{userPermissions:t}=e,[i,s]=(0,r.useState)([]),[n,o]=(0,r.useState)({}),[d,v]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(0),[g,w]=(0,r.useState)(10),b=(0,r.useRef)(null),_=e=>{var t;null===(t=b.current)||void 0===t||t.show({severity:"success",summary:"Success",detail:e,life:3e3})},S=e=>{o(e),v(!0)},C=e=>{o(e),y(!0)},Z=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let{data:t,meta:i}=await u.Z.getUsers({page:e,size:g});s(t),f(null==i?void 0:i.total)}catch(e){console.error(e)}};(0,r.useEffect)(()=>{Z()},[]);let D=(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(null==t?void 0:t.includes("user.create"))&&(0,l.jsx)(a.z,{label:"Add",icon:"pi pi-plus",onClick:()=>v(!0)})});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.w,{value:i,editMode:"row",dataKey:"id",header:D,tableStyle:{minWidth:"50rem"},style:{marginBottom:"10px"},children:[(0,l.jsx)(m.s,{field:"name",header:"Name",style:{width:"20%"}}),(0,l.jsx)(m.s,{field:"surname",header:"Surname",style:{width:"20%"}}),(0,l.jsx)(m.s,{field:"email",header:"Mail",style:{width:"20%"}}),(0,l.jsx)(m.s,{field:"role",body:e=>(0,l.jsx)("div",{children:k(e.role.id)}),header:"Role",style:{width:"20%"}}),(0,l.jsx)(m.s,{body:e=>(0,l.jsxs)(r.Fragment,{children:[(null==t?void 0:t.includes("user.update"))&&(0,l.jsx)(a.z,{icon:"pi pi-pencil",rounded:!0,text:!0,severity:"secondary",style:{marginRight:"10px"},onClick:()=>S(e)}),(null==t?void 0:t.includes("user.delete"))&&(0,l.jsx)(a.z,{icon:"pi pi-trash",rounded:!0,outlined:!0,text:!0,severity:"danger",onClick:()=>C(e)})]}),exportable:!1,style:{width:"20%"}})]}),(0,l.jsx)(B.D,{rows:g,totalRecords:j,onPageChange:e=>{Z(e.page+1)}}),(0,l.jsx)(c.F,{ref:b}),(0,l.jsx)(x,{user:n,userDeleteDialog:h,setUserDeleteDialog:y,setUsers:s,showSuccess:_}),(0,l.jsx)(R,{user:n,setUsers:s,userEditDialog:d,setUserEditDialog:v,showSuccess:_})]})},D=i(8518),F=i.n(D),E=i(891),z=function(e){let{dialog:t,setDialog:i,showSuccess:r,setServicesTypes:s}=e,{control:n,handleSubmit:o,formState:{errors:d}}=(0,y.cI)(),c=async e=>{let{name:t,price:l}=e;l=l||0;try{let{data:e}=await u.Z.createServiceType({name:t,price:l});s(t=>[...t,e]),r("Service type has been successfully created"),i(!1)}catch(e){console.error(e)}};return(0,l.jsx)(v.V,{visible:t,style:{width:"25rem"},header:"Service type details",modal:!0,onHide:()=>i(!1),children:(0,l.jsxs)("form",{onSubmit:o(c),style:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"name",children:"Name:"}),(0,l.jsx)(y.Qr,{name:"name",control:n,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(h.o,{style:{marginBottom:"10px"},id:"name",invalid:!!(null==d?void 0:d.name),...t})}}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"surname",children:"Price:"}),(0,l.jsx)(y.Qr,{name:"price",control:n,render:e=>{let{field:t}=e;return(0,l.jsx)(E.R,{onBlur:t.onBlur,ref:t.ref,value:(null==t?void 0:t.value)||0,onValueChange:e=>t.onChange(e),mode:"currency",currency:"AZN",locale:"de-DE",style:{marginBottom:"10px"},invalid:!!d.price})}}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)(a.z,{label:"Save",type:"submit"})})]})})},N=function(e){let{serviceType:t,deleteDialog:i,setDeleteDialog:s,setServicesTypes:n,showSuccess:o}=e,d=(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(a.z,{label:"No",icon:"pi pi-times",outlined:!0,onClick:()=>s(!1)}),(0,l.jsx)(a.z,{label:"Yes",icon:"pi pi-check",severity:"danger",onClick:()=>{n(e=>e.filter(e=>e.id!==(null==t?void 0:t.id)));try{u.Z.deleteServiceType(null==t?void 0:t.id),s(!1),o("Service type has been successfully deleted")}catch(e){console.error(e)}}})]});return(0,l.jsx)(v.V,{visible:i,style:{width:"32rem"},breakpoints:{"960px":"75vw","641px":"90vw"},header:"Confirm",modal:!0,footer:d,onHide:()=>s(!1),children:(0,l.jsxs)("div",{className:"confirmation-content",children:[(0,l.jsx)("i",{className:"pi pi-exclamation-triangle",style:{fontSize:"2rem",marginRight:"10px"}}),t&&(0,l.jsxs)("span",{children:["Are you sure you want to delete ",(0,l.jsx)("b",{children:null==t?void 0:t.name}),"?"]})]})})},A=function(e){let{userPermissions:t}=e,[i,s]=(0,r.useState)(),[n,o]=(0,r.useState)(!1),[d,v]=(0,r.useState)([]),[x,y]=(0,r.useState)(0),[j,f]=(0,r.useState)(10),[g,w]=(0,r.useState)(!1),b=(0,r.useRef)(null),_=e=>{var t;null===(t=b.current)||void 0===t||t.show({severity:"success",summary:"Success",detail:e,life:3e3})},S=e=>(0,l.jsx)(E.R,{value:e.value,onValueChange:t=>e.editorCallback(t.value),mode:"currency",currency:"AZN",locale:"de-DE"}),C=e=>(0,l.jsx)(h.o,{type:"text",value:e.value,onChange:t=>e.editorCallback(t.target.value)}),R=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let{data:t,meta:i}=await u.Z.getServiceTypes({page:e,size:j});v(t),y(null==i?void 0:i.total)}catch(e){console.error(e)}};(0,r.useEffect)(()=>{R()},[]);let k=e=>{s(e),o(!0)},Z=(null==t?void 0:t.includes("service_type.create"))&&(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)(a.z,{label:"Add",icon:"pi pi-plus",onClick:()=>w(!0)})});return(0,l.jsxs)("div",{children:[(0,l.jsxs)(p.w,{value:d,editMode:"row",dataKey:"id",onRowEditComplete:e=>{let{newData:t}=e,{id:i,name:l,price:r}=t;r=r||0;try{u.Z.updateServiceType({id:i,name:l,price:r});let e={...t,name:l,price:r,id:i},s=d.map(t=>t.id===e.id?e:t);v(s),_("Service type has been successfully updated")}catch(e){console.error(e)}},tableStyle:{minWidth:"50rem"},header:Z,style:{marginBottom:"10px"},children:[(0,l.jsx)(m.s,{field:"name",header:"Name",editor:e=>C(e),style:{width:"40%"}}),(0,l.jsx)(m.s,{field:"price",header:"Price",body:e=>{var t,i;let l=new Intl.NumberFormat("az-AZ",{style:"currency",currency:"AZN"}).formatToParts(+e.price),r=null!==(i=null===(t=l.find(e=>"currency"===e.type))||void 0===t?void 0:t.value)&&void 0!==i?i:"AZN",s=l.filter(e=>"currency"!==e.type).map(e=>e.value).join("");return"".concat(s," ").concat(r)},editor:e=>S(e),style:{width:"40%"}}),(null==t?void 0:t.includes("service_type.update"))&&(0,l.jsx)(m.s,{rowEditor:e=>(null==e?void 0:e.name)!=="Blue Band",headerStyle:{width:"10%"},bodyStyle:{textAlign:"center"}}),(null==t?void 0:t.includes("service_type.delete"))&&(0,l.jsx)(m.s,{body:e=>(0,l.jsx)(r.Fragment,{children:(0,l.jsx)(a.z,{icon:"pi pi-trash",rounded:!0,text:!0,severity:"danger",onClick:()=>k(e)})}),exportable:!1,style:{width:"1%"}})]}),(0,l.jsx)(B.D,{rows:j,totalRecords:x,onPageChange:e=>{R(e.page+1)}}),(0,l.jsx)(c.F,{ref:b}),(0,l.jsx)(z,{dialog:g,setDialog:w,showSuccess:_,setServicesTypes:v}),(0,l.jsx)(N,{serviceType:i,deleteDialog:n,setDeleteDialog:o,setServicesTypes:v,showSuccess:_})]})},I=i(686),W=i(1572),U=e=>{let{dialog:t,setDialog:i,userPermissions:s,showSuccess:n,setServices:o,service:d,setService:c}=e,[m,p]=(0,r.useState)(),[x,g]=(0,r.useState)(),[w,_]=(0,r.useState)({name:"Cash",id:0}),[R,B]=(0,r.useState)(),[k,Z]=(0,r.useState)(),[D,F]=(0,r.useState)(),z=j.Ry().shape({service_type_id:j.Rx().required(),client_name:j.Z_().required(),client_phone:s.includes("service.variable.phone")?j.Z_().required():j.Z_(),amount:s.includes("service.variable.amount")?j.Rx().required():j.Rx(),payment_type:s.includes("service.variable.payment_type")?j.Rx().required():j.Rx(),user_id:s.includes("service.variable.user_id")?j.Rx().required():j.Rx(),reject_comment:(null==R?void 0:R.id)===2&&s.includes("service.variable.reject_comment")?j.Z_().required():j.Z_().nullable()}),{control:N,handleSubmit:A,formState:{errors:U},setValue:q,reset:P}=(0,y.cI)({resolver:(0,f.X)(z)}),T=async e=>{try{let{data:t}=(null==d?void 0:d.id)?await u.Z.updateService({...e,id:d.id}):await u.Z.createService(e);n("Service has been successfull created"),o(e=>(null==d?void 0:d.id)?e.map(e=>e.id===d.id?t:e):[t,...e]),i(!1)}catch(e){console.error(e)}};return(0,r.useEffect)(()=>{if(null==d?void 0:d.id){var e;q("client_name",d.client_name),q("client_phone",d.client_phone),q("user_id",d.user.id),q("service_type_id",d.service_type.id),q("amount",+d.amount),q("payment_type",d.payment_type||0),q("reject_comment",d.reject_comment);let t=()=>0!==d.status?C.find(e=>(null==e?void 0:e.id)===d.status):{id:1,name:"Accepted"};q("status",null===(e=t())||void 0===e?void 0:e.id),B(t),g(null==k?void 0:k.find(e=>e.id===d.user.id)),p(null==D?void 0:D.find(e=>e.id===d.service_type.id))}},[d,q]),(0,r.useEffect)(()=>{(async()=>{if(s.includes("user.input_search")){let{data:e}=await u.Z.getDoctors();Z(e)}if(s.includes("service_type.input_search")){let{data:e}=await u.Z.getInputServices();F(e)}})()},[]),(0,l.jsx)(v.V,{visible:t,modal:!0,onHide:()=>{i(!1),P(),c({})},style:{minWidth:"500px"},children:(0,l.jsxs)("form",{onSubmit:A(T),style:{display:"flex",flexDirection:"column"},children:[s.includes("service.variable.client_name")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"name",children:"Client name:"}),(0,l.jsx)(y.Qr,{name:"client_name",control:N,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(h.o,{style:{marginBottom:"10px"},id:"name",invalid:!!U.client_name,...t})}})]}),s.includes("service.variable.phone")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"name",children:"Client phone:"}),(0,l.jsx)(y.Qr,{name:"client_phone",control:N,rules:{required:!0,minLength:12},render:e=>{let{field:t}=e;return(0,l.jsx)(I.v,{style:{marginBottom:"10px"},id:"client_phone",mask:"+999 99 999-99-99",placeholder:"(+994)99 999-99-99",invalid:!!U.client_phone,...t})}})]}),s.includes("service.variable.user_id")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"email",children:"Doctor:"}),(0,l.jsx)(y.Qr,{name:"user_id",control:N,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(b.L,{filter:!0,style:{marginBottom:"10px"},value:x,onChange:e=>{g(e.value),q("user_id",e.value.id)},optionLabel:"full_name",options:k,placeholder:"Select a doctor",invalid:!!U.user_id})}})]}),s.includes("service.variable.service_type_id")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"email",children:"Service:"}),(0,l.jsx)(y.Qr,{name:"service_type_id",control:N,render:e=>{let{field:t}=e;return(0,l.jsx)(b.L,{filter:!0,style:{marginBottom:"10px"},value:m,onChange:e=>{p(e.value),q("service_type_id",e.value.id),q("amount",e.value.price)},options:D,optionLabel:"name",placeholder:"Select a service",className:"w-full md:w-14rem",invalid:!!U.service_type_id})}})]}),(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"email",children:"Amount:"}),(0,l.jsx)(y.Qr,{name:"amount",control:N,render:e=>{let{field:t}=e;return(0,l.jsx)(E.R,{onBlur:t.onBlur,disabled:!s.includes("service.variable.amount"),ref:t.ref,value:(null==t?void 0:t.value)||0,onValueChange:e=>t.onChange(e),mode:"currency",currency:"AZN",locale:"de-DE",style:{marginBottom:"10px"},invalid:!!U.amount})}}),s.includes("service.variable.reject_comment")&&(null==R?void 0:R.id)===2&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{style:{marginBottom:"5px"},htmlFor:"name",children:"Reject comment:"}),(0,l.jsx)(y.Qr,{name:"reject_comment",control:N,rules:{required:!0},render:e=>{var t;let{field:i}=e;return(0,l.jsx)(h.o,{style:{marginBottom:"10px"},id:"name",invalid:!!U.reject_comment,...i,value:null!==(t=i.value)&&void 0!==t?t:""})}})]}),s.includes("service.variable.payment_type")&&(0,l.jsx)("div",{style:{display:"flex",marginBottom:"10px"},children:S.map(e=>(0,l.jsxs)("div",{children:[(0,l.jsx)(W.E,{inputId:null==e?void 0:e.name,name:"category",value:e,onChange:e=>{_(e.value),q("payment_type",e.value.id)},checked:(null==w?void 0:w.id)===e.id}),(0,l.jsx)("label",{htmlFor:null==e?void 0:e.name,style:{marginRight:"10px",marginLeft:"4px"},children:null==e?void 0:e.name})]},e.id))}),s.includes("service.variable.status")&&(null==d?void 0:d.id)&&(0,l.jsx)("div",{style:{display:"flex",marginBottom:"10px"},children:C.map(e=>(null==e?void 0:e.id)!==0&&(0,l.jsxs)("div",{children:[(0,l.jsx)(W.E,{inputId:e.name,name:"category",value:e,onChange:e=>{B(e.value),q("status",e.value.id)},checked:(null==R?void 0:R.id)===e.id}),(0,l.jsx)("label",{style:{marginRight:"10px",marginLeft:"4px"},children:e.name})]},e.id))}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)(a.z,{label:"Save",type:"submit"})})]})})},q=i(9749),P=i(7332),T=e=>{let{dialog:t,setDialog:i}=e,[s,n]=(0,r.useState)(new Date),[o,d]=(0,r.useState)([new Date,new Date]),[c,m]=(0,r.useState)([new Date,new Date]),p=e=>{let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(i,"-").concat(l)};return(0,l.jsx)(v.V,{header:"Reports",visible:t,onHide:()=>{t&&i(!1)},children:(0,l.jsxs)("div",{style:{minWidth:"40vw",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,l.jsx)(a.z,{icon:"pi pi-file-excel",severity:"success",label:"Dailly report",style:{width:"180px"},onClick:()=>u.Z.getDailyReportExcel(p(s))}),(0,l.jsx)(P.f,{value:s,onChange:e=>n(e.value),style:{width:"170px"},showIcon:!0})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,l.jsx)(a.z,{icon:"pi pi-file-excel",severity:"success",label:"Bonus report",style:{width:"180px"}}),(0,l.jsx)(P.f,{value:o,onChange:e=>d(e.value),selectionMode:"range",readOnlyInput:!0,hideOnRangeSelection:!0,style:{width:"270px"},showIcon:!0})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,l.jsx)(a.z,{icon:"pi pi-file-excel",severity:"success",label:"General report",style:{width:"181px"},onClick:()=>u.Z.getGeneralReportExcel([p(c[0]),p(c[1])])}),(0,l.jsx)(P.f,{value:c,onChange:e=>m(e.value),selectionMode:"range",readOnlyInput:!0,hideOnRangeSelection:!0,style:{width:"270px"},showIcon:!0})]})]})})},L=function(e){let{userPermissions:t}=e,[i,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(),[d,x]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1),[g,w]=(0,r.useState)(),[b,_]=(0,r.useState)(0),[S,R]=(0,r.useState)(0),[k,Z]=(0,r.useState)(10),D=(0,r.useRef)(null),F=e=>{o(e),x(!0)},E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let{data:t,meta:i}=await u.Z.getServices({page:e,size:k});s(t),R(null==i?void 0:i.total)}catch(e){console.error(e)}};(0,r.useEffect)(()=>{E()},[]);let z=t.includes("service.create")&&(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,l.jsx)(a.z,{label:"Reports",icon:"pi pi-file-excel",severity:"success",onClick:()=>y(!0),style:{marginRight:"10px"}}),(0,l.jsx)(a.z,{label:"Add",icon:"pi pi-plus",onClick:()=>x(!0)})]}),N=e=>{switch(e){case"Rejected":return"danger";case"Accepted":return"success";case"New":return"info"}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.w,{value:i,editMode:"row",dataKey:"id",header:z,tableStyle:{minWidth:"50rem"},style:{marginBottom:"10px"},children:[(0,l.jsx)(m.s,{field:"id",header:"Id",style:{width:"2%"}}),(0,l.jsx)(m.s,{dataType:"date",header:"Date",body:e=>e.created_at.split(" ")[0],style:{width:"10%"}}),(0,l.jsx)(m.s,{field:"client_name",header:"Client",style:{width:"10%"}}),(0,l.jsx)(m.s,{field:"client_phone",header:"Phone",style:{width:"10%"}}),(0,l.jsx)(m.s,{field:"service_type.name",header:"Service",style:{width:"10%"}}),(0,l.jsx)(m.s,{field:"service_type.name",header:"Doctor",body:e=>{var t,i;return"".concat(null===(t=e.user)||void 0===t?void 0:t.name," ").concat(null===(i=e.user)||void 0===i?void 0:i.surname)},style:{width:"10%"}}),(0,l.jsx)(m.s,{header:"Amount",body:e=>{var t,i;let l=new Intl.NumberFormat("az-AZ",{style:"currency",currency:"AZN"}).formatToParts(+e.amount),r=null!==(i=null===(t=l.find(e=>"currency"===e.type))||void 0===t?void 0:t.value)&&void 0!==i?i:"AZN",s=l.filter(e=>"currency"!==e.type).map(e=>e.value).join("");return"".concat(s," ").concat(r)},style:{width:"10%"}}),(0,l.jsx)(m.s,{header:"Status",body:e=>{var t;let i=null===(t=C.find(t=>(null==t?void 0:t.id)===e.status))||void 0===t?void 0:t.name;return(0,l.jsx)(q.V,{onClick:()=>{"Rejected"===i&&(w(e.reject_comment),f(!0))},icon:"Rejected"===i&&"pi pi-info-circle",value:i,severity:N(i)})},style:{width:"10%"}}),t.includes("service.update")&&(0,l.jsx)(m.s,{body:e=>(0,l.jsx)(r.Fragment,{children:(0,l.jsx)(a.z,{icon:"pi pi-pencil",rounded:!0,text:!0,severity:"secondary",style:{marginRight:"10px"},onClick:()=>F(e)})}),exportable:!1,style:{width:"2%"}})]}),(0,l.jsx)(B.D,{first:b,rows:k,totalRecords:S,onPageChange:e=>{E(e.page+1),_(e.first)}}),(0,l.jsx)(c.F,{ref:D}),(0,l.jsx)(U,{userPermissions:t,dialog:d,setDialog:x,showSuccess:e=>{var t;null===(t=D.current)||void 0===t||t.show({severity:"success",summary:"Success",detail:e,life:3e3})},setServices:s,service:n,setService:o}),(0,l.jsx)(T,{dialog:h,setDialog:y}),(0,l.jsx)(v.V,{header:"Reject comment",visible:j,style:{width:"50vw"},onHide:()=>{j&&(f(!1),w(""))},children:(0,l.jsx)("p",{className:"m-0",children:g})})]})},Q=i(1398),V=function(){var e,t;let[i,m]=(0,r.useState)(),p=(0,d.useRouter)(),v=null==i?void 0:i.role.permissions.map(e=>null==e?void 0:e.name);(0,r.useEffect)(()=>{localStorage.getItem("token")||p.push("/login")},[p]),(0,r.useEffect)(()=>{(async()=>{try{let{data:e}=await u.Z.getSelfInfo();m(e)}catch(e){console.error(e)}})()},[]);let x=(0,r.useRef)(null);return(0,r.useEffect)(()=>{x.current&&(0,Q.x)(x.current)}),(null==i?void 0:i.name)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("header",{className:F().header,children:[(0,l.jsxs)("div",{className:F().info,children:[(0,l.jsx)(n.q,{shape:"circle",label:null==i?void 0:null===(e=i.name[0])||void 0===e?void 0:e.toUpperCase(),style:{backgroundColor:"#60A5FA"}}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:"".concat(null==i?void 0:i.name," ").concat(null==i?void 0:i.surname)}),(0,l.jsx)("small",{children:k(null==i?void 0:null===(t=i.role)||void 0===t?void 0:t.id)})]})]}),(0,l.jsx)(a.z,{icon:"pi pi-sign-out",severity:"info","aria-label":"User",onClick:()=>{localStorage.clear(),p.push("/login")}})]}),(0,l.jsx)(s.i,{}),(0,l.jsx)("main",{className:F().main,children:(0,l.jsxs)(o.f,{children:[(null==v?void 0:v.includes("service.get_all"))&&(0,l.jsx)(o.x,{header:"Services",children:(0,l.jsx)(L,{userPermissions:v})}),(null==v?void 0:v.includes("service_type.get_all"))&&(0,l.jsx)(o.x,{header:"Service types",children:(0,l.jsx)(A,{userPermissions:v})}),(null==v?void 0:v.includes("user.get_all"))&&(0,l.jsx)(o.x,{header:"Users",children:(0,l.jsx)(Z,{userPermissions:v})})]})}),(0,l.jsx)(c.F,{ref:x})]}):(0,l.jsx)(l.Fragment,{})}},1398:function(e,t,i){"use strict";i.d(t,{W:function(){return o},x:function(){return n}});var l=i(2126),r=i(6463);let s=null,n=e=>{s=e},a=l.Z.create({baseURL:"https://api.nargizestetik.az/api"});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e.data,async e=>(e.response&&"USER_NOT_AUTHORIZED"===e.response.data.message?(localStorage.clear(),(0,r.redirect)("/login")):e.response&&e.response.data.message&&s&&s.show({severity:"error",summary:"Error",detail:e.response.data.message,life:3e3}),e&&e.response)?Promise.reject(e):Promise.reject());let o=a},8518:function(e){e.exports={header:"page_header__oRW75",info:"page_info__8WZDv",main:"page_main__nw1Wk"}}},function(e){e.O(0,[851,651,754,567,889,971,23,744],function(){return e(e.s=1542)}),_N_E=e.O()}]);